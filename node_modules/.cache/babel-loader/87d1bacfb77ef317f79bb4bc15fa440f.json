{"ast":null,"code":"import _slicedToArray from \"/home/armish/University/Semester-8/FYP-2/Delance-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/armish/University/Semester-8/FYP-2/Delance-app/src/Components/MyProjects/ShowBids.jsx\";\n/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\nfunction ShowBids(props) {\n  var _this = this;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    show = _useState2[0],\n    setShow = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    bids = _useState4[0],\n    setBids = _useState4[1]; // state for all projects!\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n  var handleShow = function handleShow() {\n    setShow(true);\n  };\n  var serverUrl = \"http://localhost:8080\";\n  var getBids = function getBids() {\n    var url = serverUrl + \"/api/bid/getByProjectId/\";\n    axios.get(url + props.projectId).then(function (res) {\n      setBids(res.data);\n    }).catch(function (err) {\n      return console.log(\"Error while fetching projects \".concat(err, \"!\"));\n    });\n  };\n  // fetching bids.\n  var updatePrice = function updatePrice(_p) {\n    var url = serverUrl + \"/api/projects/update/\";\n    axios.put(url + props.projectId, {\n      price: _p\n    }).catch(function (err) {\n      return console.log(\"Error while updating projects \".concat(err, \"!\"));\n    });\n  };\n  useEffect(function () {\n    // console.log(\"projectId: \", props.projectId);\n    getBids();\n  }, []);\n  var postOnBlockchain = function postOnBlockchain(_p) {\n    // alert('Are you sure?')\n    var amount = ethers.utils.parseUnits(_p, \"ether\");\n    console.log(\"amount post; \", amount);\n    console.log(\"amount: \", _p);\n    props.addJob(props.projectTitle, _p);\n    updatePrice(_p);\n    handleClose();\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleShow,\n    id: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"View Bids\"), /*#__PURE__*/React.createElement(Modal, {\n    size: \"lg\",\n    show: show,\n    onHide: handleClose,\n    id: \"model\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    id: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, \"Registered Bids\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    id: \"model\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, bids.map(function (bid, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bid\",\n      key: bid._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      id: \"head\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }, \"Summary: \"), bid.summary), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      id: \"head\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }, \"Price: \"), bid.price + \" eth\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"success\",\n      size: \"sm\",\n      id: \"btn\",\n      onClick: function onClick(e) {\n        postOnBlockchain(bid.price);\n        window.location.reload();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, \"Close Bid\"));\n  })), /*#__PURE__*/React.createElement(Modal.Footer, {\n    id: \"model\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: handleClose,\n    id: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Done\"))));\n}\nexport default ShowBids;","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","axios","ethers","ShowBids","props","show","setShow","bids","setBids","handleClose","handleShow","serverUrl","getBids","url","get","projectId","then","res","data","catch","err","console","log","updatePrice","_p","put","price","postOnBlockchain","amount","utils","parseUnits","addJob","projectTitle","map","bid","index","_id","summary","e","window","location","reload"],"sources":["/home/armish/University/Semester-8/FYP-2/Delance-app/src/Components/MyProjects/ShowBids.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\n\nfunction ShowBids(props) {\n  const [show, setShow] = useState(false);\n  const [bids, setBids] = useState([]); // state for all projects!\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => {\n    setShow(true);\n  };\n  const serverUrl = \"http://localhost:8080\";\n  const getBids = () => {\n    \n    let url = serverUrl + \"/api/bid/getByProjectId/\";\n    axios\n      .get(url + props.projectId)\n      .then((res) => {\n        setBids(res.data);\n      })\n      .catch((err) => console.log(`Error while fetching projects ${err}!`));\n  };\n  // fetching bids.\n  const updatePrice = (_p) => {\n    let url = serverUrl + \"/api/projects/update/\";\n    axios\n      .put(url + props.projectId, { price: _p })\n      .catch((err) => console.log(`Error while updating projects ${err}!`));\n  };\n\n  useEffect(() => {\n    // console.log(\"projectId: \", props.projectId);\n    getBids();\n  }, []);\n\n  const postOnBlockchain = (_p) => {\n    // alert('Are you sure?')\n    let amount = ethers.utils.parseUnits(_p, \"ether\");\n    console.log(\"amount post; \", amount);\n    console.log(\"amount: \", _p);\n    props.addJob(props.projectTitle, _p);\n    updatePrice(_p);\n    handleClose();\n  };\n\n  return (\n    <>\n      <Button variant=\"secondary\" onClick={handleShow} id=\"btn\">\n        View Bids\n      </Button>\n\n      {/* <Button variant=\"secondary\" onClick={completeProject} id=\"btn-2\">\n        Complete Project\n      </Button> */}\n\n      <Modal size=\"lg\" show={show} onHide={handleClose} id=\"model\">\n        <Modal.Header closeButton id=\"header\">\n          <Modal.Title>Registered Bids</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body id=\"model\">\n          {/* {console.log(typeof bids.projectId, typeof props.projects.id)} */}\n          {bids.map((bid, index) => {\n            return (\n              <div className=\"bid\" key={bid._id}>\n                <p>\n                  <b id=\"head\">Summary: </b>\n                  {bid.summary}\n                </p>\n                <p>\n                  <b id=\"head\">Price: </b>\n                  {bid.price + \" eth\"}\n                </p>\n                <Button\n                  variant=\"success\"\n                  size=\"sm\"\n                  id=\"btn\"\n                  onClick={(e) => {\n                    postOnBlockchain(bid.price);\n                    window.location.reload();\n                  }}\n                >\n                  Close Bid\n                </Button>\n              </div>\n            );\n          })}\n        </Modal.Body>\n        {/* <h1>Hello there!</h1> */}\n\n        <Modal.Footer id=\"model\">\n          <Button variant=\"primary\" onClick={handleClose} id=\"btn\">\n            Done\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n\nexport default ShowBids;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}